<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://perevillega.com name=base><title>Software serves the Business • Playing with Rust</title><link href=https://perevillega.com/icons/favicon.ico rel=icon type=image/png><link title="Software serves the Business - Atom Feed" href=https://perevillega.com/atom.xml rel=alternate type=application/atom+xml><link href="https://perevillega.com/inter_subset_en.css?h=d8cf4ad058d6c3a4015b" rel=stylesheet><link href="https://perevillega.com/main.css?h=149ff9e737409b86f9c3" rel=stylesheet><meta content="light dark" name=color-scheme><meta content=#087e96 name=theme-color><meta content="Rust is not, at this stage, a new language. But I have to confess that I had not checked it out until now. I built a small tool to test it out. In this post I’ll briefly talk about how it felt working with Rust from the point of view of a Scala developer.
…" name=description><meta content="Rust is not, at this stage, a new language. But I have to confess that I had not checked it out until now. I built a small tool to test it out. In this post I’ll briefly talk about how it felt working with Rust from the point of view of a Scala developer.
…" property=og:description><meta content="index, nofollow" name=robots><meta content="Playing with Rust" property=og:title><meta content=article property=og:type><meta content="https://perevillega.com/social_cards/index.png?h=125d02cc3c86eaf88fa6" property=og:image><meta content=2088 property=og:image:width><meta content=1000 property=og:image:height><meta content="https://perevillega.com/social_cards/index.png?h=125d02cc3c86eaf88fa6" name=twitter:image><meta content=summary_large_image name=twitter:card><meta content=en_GB property=og:locale><meta content=https://perevillega.com/posts/playing-with-rust/ property=og:url><meta content="Software serves the Business" property=og:site_name><meta content="default-src 'self';font-src 'self' data: 'self';img-src 'self' https://* data:;media-src 'self' https://cdn.jsdelivr.net/;style-src 'self' 'unsafe-inline';frame-src player.vimeo.com https://www.youtube-nocookie.com;connect-src 'self' https://umami.villegawilcz.com;script-src 'self' https://umami.villegawilcz.com 'self'" http-equiv=Content-Security-Policy><noscript><link href=https://perevillega.com/no_js.css rel=stylesheet></noscript><script src=https://perevillega.com/js/initializeTheme.min.js></script><script defer src=https://perevillega.com/js/themeSwitcher.min.js></script><script async data-do-not-track=true data-website-id=7bdfa858-bebc-479d-9a1f-bea833a709a8 defer src=https://umami.villegawilcz.com/script.js></script><meta content=@pvillega@mastodon.social name=fediverse:creator><script src="https://perevillega.com/search_index.en.js?h=791a6da9678059241bea" defer></script><script src="https://perevillega.com/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><header><nav class=navbar><div class=nav-title><a class=home-title href=https://perevillega.com>Software serves the Business</a></div><div class=nav-navs><ul><li><a class="nav-links no-hover-padding" href=https://perevillega.com/posts/> blog </a><li><a class="nav-links no-hover-padding" href=https://perevillega.com/tags/> tags </a></li><div class=nav-navs id=menu-icons-group><li class=js><div aria-label="Click or press $SHORTCUT to open search" class="search-icon interactive-icon" title="Click or press $SHORTCUT to open search" id=search-button role=button tabindex=0><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg></div><li class="theme-switcher-wrapper js"><div aria-label="Toggle dark mode" title="Toggle dark/light mode" aria-pressed=false class=theme-switcher role=button tabindex=0></div><div aria-label="Reset mode to default" class="theme-resetter arrow" title="Reset mode to default" aria-hidden=true role=button tabindex=0></div></div></ul></div></nav></header><div class=content><main><article><h1 class=article-title>Playing with Rust</h1><ul class=meta><li>5th Feb 2019<li title="1209 words"><span aria-hidden=true class=separator>•</span>7 min read<li class=tag><span aria-hidden=true class=separator>•</span>Tags: <li class=tag><a href=https://perevillega.com/tags/rust/>rust</a>, <li class=tag><a href=https://perevillega.com/tags/twitter/>twitter</a></ul><section class=body><p><a href=https://www.rust-lang.org rel=noopener target=_blank>Rust</a> is not, at this stage, a new language. But I have to confess that I had not checked it out until now. I built a <a href=https://crates.io/crates/twitter_privacy rel=noopener target=_blank>small tool</a> to test it out. In this post I’ll briefly talk about how it felt working with Rust from the point of view of a Scala developer.</p><span id=continue-reading></span><p>During the last <a href=https://skillsmatter.com/conferences/10488-scala-exchange-2018 rel=noopener target=_blank>Scala Exchange</a> I heard a lot of people talking about Rust. As a consequence, learning more about the language became a higher priority, as it is always good to listen to people with more experience :). It was also an excuse to use <a href=https://code.visualstudio.com rel=noopener target=_blank>Visual Studio Code</a> a bit more, to familiarise with its bindings so I can get the most out of <a href=https://github.com/scalameta/metals rel=noopener target=_blank>Metals</a>.<p>The best way to learn a new language is to build something with it, as that is the scenario when you hit all the common problems. What I wanted to avoid is to fight not only Rust but also some web framework or library on top of it. Time ago I built a tool to delete old tweets from my account, using Scala: <a href=https://github.com/pvillega/twitter-privacy rel=noopener target=_blank>twitter privacy</a>. It works well, but the nature of the program (running in a cron job once a day) makes it much slower than it should be, due to cold-start time of the JVM.<p>Rust is known as a fast language, and a replacement of this tool using Rust seemed like a good fit for learning the language without having too many libraries involved. You can find the source code of the outcome <a href=https://github.com/pvillega/twitter_privacy rel=noopener target=_blank>in github</a>, and it has been published <a href=https://crates.io/crates/twitter_privacy rel=noopener target=_blank>to cargo.io</a>.<p>If you want to use it for your own social media maintenance, instructions on how to run it are in the <a href=https://github.com/pvillega/twitter_privacy/blob/master/Readme.md rel=noopener target=_blank>Readme file</a> in Github.<h2 id=rust-as-a-language><a aria-label="Anchor link for: rust-as-a-language" class="header-anchor no-hover-padding" href=#rust-as-a-language><span aria-hidden=true class=link-icon></span></a> Rust as a language</h2><p>As a Scala developer, I found Rust a very interesting language. For example, I’ve heard very often criticism towards the duality OO-FP of Scala, pointing it was a bad decision. Rust clearly states in <a href=https://doc.rust-lang.org/stable/book/ rel=noopener target=_blank>their book</a> that they support both, having a chapter dedicated to each one, and on how to work in that particular way with the language.<p>Rust has a very active community and very good documentation for their tooling and libraries. For example, check the documentation for <a href=https://doc.rust-lang.org/cargo/ rel=noopener target=_blank>Cargo</a>, it’s build tool. Or for one of the libraries I used, <a href=https://tonberry.quietmisdreavus.net/doc/egg_mode/index.html rel=noopener target=_blank>Egg_Mode</a>.<p>The community is actively trying to exploit the advantages of Rust (speed, memory management). There’s a lot of work to build libraries using Rust in domains like <a href=http://arewegameyet.com rel=noopener target=_blank>game development</a>, <a href=https://www.arewelearningyet.com rel=noopener target=_blank>machine learning</a>, or <a href=https://www.arewewebyet.org rel=noopener target=_blank>web development</a>.<p>A key area for Rust growth may be <a href=https://webassembly.org rel=noopener target=_blank>WebAssembly</a>, a binary format enabling deployment on the web for client and server applications. Rust already compiles to it and has good tolling and <a href=https://rustwasm.github.io/book/introduction.html rel=noopener target=_blank>documentation</a>. This could enable a real ‘build once and deploy anywhere’ development mode, without the issues caused by nuances of different platforms.<p>In general working with it felt familiar and there weren’t many unexpected surprises. The following comments come from someone which has been working extensively in the JVM world, with some non-professional experience in non-JVM languages.<h2 id=the-good><a aria-label="Anchor link for: the-good" class="header-anchor no-hover-padding" href=#the-good><span aria-hidden=true class=link-icon></span></a> The Good</h2><p>I liked the language and I felt comfortable with it, but there are some things worth of mention:<ul><li><p>Speed. It’s been so many years using Scala that I forgot how fast can a CPU. Both compilation and execution are <em>fast</em>, and help with keeping the development flow. No time for a small break on Twitter, or similar.</p><li><p>Typeclasses (using Traits). I got too used to Typeclasses and it would be hard to move to a language without them. The restriction on implementing instances of a Typeclass which doesn’t belong to your package have been a bit of a nuisance at some stages, but I understand the motivation behind that call, and it’s not a deal breaker.</p><li><p>Cargo. It’s what <code>sbt</code> should be. The only tool you need as a developer to compile, test, benchmark, or publish to a central repository. Which, by the way, is a trivial to do (compared to the nightmare of publishing to Sonatype).</p><li><p>Local documentation. The fact that you can, with a single cargo command, open the documentation of your dependencies for the specific version you are using is a life-saver. In this particular project the library that interacts with Twitter has changed a lot between the last published version and the current version under development, thus going to the online documentation could be very confusing.</p></ul><h2 id=the-less-good><a aria-label="Anchor link for: the-less-good" class="header-anchor no-hover-padding" href=#the-less-good><span aria-hidden=true class=link-icon></span></a> The Less Good</h2><p>Nothing is perfect, less so when you are experimenting with a new language. Some aspects that made the learning-curve harder:<ul><li><p>Lifetimes. It’s one of the main features of Rust, it comes with major benefits, but it was a pain to manage. I had to refactor a lot of code because at the top level a closure would give me a lifetime error that I couldn’t fix. I guess with experience you get better at it, and it forces you to make smaller methods to avoid odd dependencies, but… it can be a pain. Garbage collection is a blessing, sometimes.</p><li><p>Semicolons. Used to Scala, having to add semicolons at the end of most of the lines wasn’t a great experience. The worst is exactly that <em>most of the lines</em> part, as there are lines in which you don’t want semicolons as they change the meaning of the expression. Not hard to grasp, but feels like a step backwards.</p><li><p>Snake Case. Ok, it’s something minor, but after so many years in the JVM world, moving to Snake case wasn’t easy, habits die hard. And <a href=https://github.com/rust-lang/rust-clippy rel=noopener target=_blank>clippy</a> was complaining non-stop about it.</p><li><p>Bigger files. In Rust it is idiomatic to add your unit tests at the end of the file. The issue is that you end up having very long files, which are harder to navigate. It may be due to being used to the JVM way, but having a separate test folder with specific code in there feels, somehow, cleaner.</p></ul><h2 id=conclusions><a aria-label="Anchor link for: conclusions" class="header-anchor no-hover-padding" href=#conclusions><span aria-hidden=true class=link-icon></span></a> Conclusions</h2><p>I feel that Rust is great for low level work, but currently it can’t replace a stack like <code>http4s</code> and <code>cats</code> due to a lack of libraries supporting it. There are a set of community pages (the <code>AreWe</code> pages, as seen before) that explain the progress in some areas. Looking at, for example, <a href=https://areweasyncyet.rs rel=noopener target=_blank>Are We Async</a> one can see that today (February 2019) several <code>RFC</code> are still in progress and some <code>unresolved</code> questions remain open.<p>I hope they catch up soon, as the speed on both compilation and execution plus the FP support may make it a worthy alternative to Scala. But, right now, I think I’ll stick to my trusted tools for backend development, and dable with Rust only for specific needs.<p>That’s all for now, I hope this was informative and useful. As always, feedback via Twitter/Email is more than welcome. Cheers!</section><nav class="full-width article-navigation"><div><a aria-describedby=left_title aria-label=Next href=https://perevillega.com/posts/webassembly-rust-edge-computing/><span class=arrow>←</span> Next</a><p aria-hidden=true id=left_title>WebAssembly, Rust, and Edge Computing</div><div><a aria-describedby=right_title aria-label=Prev href=https://perevillega.com/posts/bridges/>Prev <span class=arrow>→</span></a><p aria-hidden=true id=right_title>Bridging Scala and the Front-End at Underscore blog</div></nav></article></main><script defer src=https://perevillega.com/js/mermaid.min.js></script><span class=hidden id=copy-success> Copied! </span><span class=hidden id=copy-init> Copy code to clipboard </span><script defer src=https://perevillega.com/js/copyCodeToClipboard.min.js></script></div><footer><section><nav class="socials nav-navs"><ul><li><a class="nav-links no-hover-padding social" href=https://perevillega.com/atom.xml rel=noopener target=_blank> <img alt=feed loading=lazy src=https://perevillega.com/social_icons/rss.svg title=feed> </a><li class=js><a class="nav-links no-hover-padding social" data-encoded-email=cHZpbGxlZ2ErYmxvZ0BhcmFjb24uY29t href=#><img alt=email loading=lazy src=https://perevillega.com/social_icons/email.svg title=email> </a><li><a class="nav-links no-hover-padding social" rel="noopener me" href=https://github.com/pvillega target=_blank> <img alt=github loading=lazy src=https://perevillega.com/social_icons/github.svg title=github> </a><li><a class="nav-links no-hover-padding social" rel="noopener me" href=https://gitlab.com/pvillega target=_blank> <img alt=gitlab loading=lazy src=https://perevillega.com/social_icons/gitlab.svg title=gitlab> </a><li><a class="nav-links no-hover-padding social" rel="noopener me" href=https://bsky.app/profile/perevillega.com target=_blank> <img alt=bluesky loading=lazy src=https://perevillega.com/social_icons/bluesky.svg title=bluesky> </a><li><a class="nav-links no-hover-padding social" rel="noopener me" href=https://www.linkedin.com/in/perevillega/ target=_blank> <img alt=linkedin loading=lazy src=https://perevillega.com/social_icons/linkedin.svg title=linkedin> </a><li><a class="nav-links no-hover-padding social" rel="noopener me" href=https://stackoverflow.com/users/116791/pere-villega target=_blank> <img alt="stack overflow" title="stack overflow" loading=lazy src=https://perevillega.com/social_icons/stack-overflow.svg> </a></ul></nav><nav class=nav-navs><small> <ul><li><a class="nav-links no-hover-padding" href=https://perevillega.com/sitemap.xml> sitemap </a></ul> </small></nav><div class=credits><small> Powered by <a href=https://www.getzola.org rel=noopener target=_blank>Zola</a> & <a href=https://github.com/welpo/tabi rel=noopener target=_blank>tabi</a> </small></div></section><script async src=https://perevillega.com/js/decodeMail.min.js></script><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><h1 class=visually-hidden id=modalTitle>Search</h1><div id=modal-content><div id=searchBar><div aria-hidden=true class=search-icon><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg></div><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search… role=combobox spellcheck=false><div class="close-icon interactive-icon" title="Clear search" id=clear-search role=button tabindex=0><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></div></div><div id=results-container><div id=results-info><span id=zero_results> No results</span><span id=one_results> $NUMBER result</span><span id=many_results> $NUMBER results</span><span id=two_results> $NUMBER results</span><span id=few_results> $NUMBER results</span></div><div id=results role=listbox></div></div></div></div></footer>