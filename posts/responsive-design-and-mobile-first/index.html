<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://perevillega.com name=base><title>Software serves the Business • Responsive Design and Mobile First</title><link href=https://perevillega.com/icons/favicon.ico rel=icon type=image/png><link title="Software serves the Business - Atom Feed" href=https://perevillega.com/atom.xml rel=alternate type=application/atom+xml><link href="https://perevillega.com/inter_subset_en.css?h=d8cf4ad058d6c3a4015b" rel=stylesheet><link href="https://perevillega.com/main.css?h=149ff9e737409b86f9c3" rel=stylesheet><link href="https://perevillega.com/custom.css?h=ff5a5712d2f0bc9d9ac2" rel=stylesheet><meta content="light dark" name=color-scheme><meta content=#087e96 name=theme-color><meta content="Mobile browsing is becoming the norm. With the advent of devices like the new iPad or the Nexus 7, predictions that mobile will surpass desktop in 2014 seem wrong: it may happen even earlier. I find myself, loving desktops as I do, using Internet on my mobile more and more often. That constant access to the net is so handy...
…" name=description><meta content="Mobile browsing is becoming the norm. With the advent of devices like the new iPad or the Nexus 7, predictions that mobile will surpass desktop in 2014 seem wrong: it may happen even earlier. I find myself, loving desktops as I do, using Internet on my mobile more and more often. That constant access to the net is so handy...
…" property=og:description><meta content="index, nofollow" name=robots><meta content="Responsive Design and Mobile First" property=og:title><meta content=article property=og:type><meta content="https://perevillega.com/social_cards/index.png?h=125d02cc3c86eaf88fa6" property=og:image><meta content=2088 property=og:image:width><meta content=1000 property=og:image:height><meta content="https://perevillega.com/social_cards/index.png?h=125d02cc3c86eaf88fa6" name=twitter:image><meta content=summary_large_image name=twitter:card><meta content=en_GB property=og:locale><meta content=https://perevillega.com/posts/responsive-design-and-mobile-first/ property=og:url><meta content="Software serves the Business" property=og:site_name><meta content="default-src 'self';font-src 'self' data: 'self';img-src 'self' https://* data:;media-src 'self' https://cdn.jsdelivr.net/;style-src 'self' 'unsafe-inline';frame-src 'self' player.vimeo.com https://www.youtube-nocookie.com https://view.officeapps.live.com;connect-src 'self' https://umami.villegawilcz.com;script-src 'self' https://umami.villegawilcz.com 'self'" http-equiv=Content-Security-Policy><noscript><link href=https://perevillega.com/no_js.css rel=stylesheet></noscript><script src=https://perevillega.com/js/initializeTheme.min.js></script><script defer src=https://perevillega.com/js/themeSwitcher.min.js></script><script async data-do-not-track=true data-website-id=7bdfa858-bebc-479d-9a1f-bea833a709a8 defer src=https://umami.villegawilcz.com/script.js></script><meta content=@pvillega@mastodon.social name=fediverse:creator><script src="https://perevillega.com/search_index.en.js?h=5e3427c9b8d057d8989e" defer></script><script src="https://perevillega.com/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><header><nav class=navbar><div class=nav-title><a class=home-title href=https://perevillega.com>Software serves the Business</a></div><div class=nav-navs><ul><li><a class="nav-links no-hover-padding" href=https://perevillega.com/posts/> blog </a><li><a class="nav-links no-hover-padding" href=https://perevillega.com/tags/> tags </a></li><div class=nav-navs id=menu-icons-group><li class=js><div aria-label="Click or press $SHORTCUT to open search" class="search-icon interactive-icon" title="Click or press $SHORTCUT to open search" id=search-button role=button tabindex=0><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg></div><li class="theme-switcher-wrapper js"><div aria-label="Toggle dark mode" title="Toggle dark/light mode" aria-pressed=false class=theme-switcher role=button tabindex=0></div><div aria-label="Reset mode to default" class="theme-resetter arrow" title="Reset mode to default" aria-hidden=true role=button tabindex=0></div></div></ul></div></nav></header><div class=content><main><article><h1 class=article-title>Responsive Design and Mobile First</h1><ul class=meta><li>22nd Jul 2012<li title="1780 words"><span aria-hidden=true class=separator>•</span>9 min read<li class=tag><span aria-hidden=true class=separator>•</span>Tags: <li class=tag><a href=https://perevillega.com/tags/webapp/>webapp</a>, <li class=tag><a href=https://perevillega.com/tags/responsive/>responsive</a>, <li class=tag><a href=https://perevillega.com/tags/mobile/>mobile</a></ul><section class=body><p>Mobile browsing is becoming the norm. With the advent of devices like the new iPad or the Nexus 7, predictions that <a href=http://blog.aids.gov/2011/10/mobile-internet-use-surpassing-desktop-internet-use-by-2014.html>mobile will surpass desktop in 2014</a> seem wrong: it may happen <a href=http://www.mobify.com/blog/mobile-web-growing-8-times-faster-than-web/>even earlier</a>. I find myself, loving desktops as I do, using Internet on my mobile more and more often. That constant access to the net is so handy...</p><span id=continue-reading></span><p>But as a web developer this provides a new challenge: your site needs to work properly both in Mobile and Desktop browsers (and in all the flavours of each: Chrome, Safari, Firefox, IE, etc.). Not so long ago this was solved by having two versions of your site, a mobile one and the classic one, where you redirected the user to the correct one as per their browser (and the mobile site was usually a poorer experience).<p>Given the new relevance of the mobile versions of the site for the companies, that approach wasn't sustainable. The model has evolved and currently there is a lot of buzz around two concepts that replace it: <strong>Mobile first</strong> and <strong>Responsive Layouts</strong>.<p><strong>Responsive Layout</strong> defines a site whose interface adapts to the size of the view-port of the client. That is, instead of redirecting the user to a version or another according to the browser used, we use CSS media queries to hide or show elements of the page according to the size of the browsing window.<p>This means that we can have only one version of our web application, providing the minimal information necessary to a browser with a tiny view-port (usually mobile, but it could be a resized desktop browser) while adding more details for bigger browsers. You can see the concept in action <a href=http://mattkersley.com/responsive/>in this site</a>.<p>But Responsive Layout doesn't come without its own <a href=http://www.netmagazine.com/features/five-responsive-web-design-pitfalls-avoid>set of problems</a>. The most common one is that small browser windows usually correspond to devices with a poorer network connection when compared to desktops. While hiding elements via CSS simplifies the UX of the site, the elements are still being sent to the device which translates, in many cases, into a very slow experience.<p><strong>Mobile First</strong> is a concept that tries to reduce the impact of this issue. Instead of designing a desktop site that hides elements when the browser window is smaller, we design the site for the tiniest device (mobile) and we display more elements if the view-port is bigger. <a href=http://en.wikipedia.org/wiki/Progressive_enhancement>Progressive enhancement</a> applied.<p>The combination of both concepts, Responsive Layout and Mobile First, allows us to create our web application once and, with a minimal extra effort, we will be able to provide a better experience to both Mobile and Desktop users. It has the additional benefit of focussing on the minimal functionality required (Mobile First) which may help to reduce clutter on some sites.<h2 id=example><a aria-label="Anchor link for: example" class="header-anchor no-hover-padding" href=#example><span aria-hidden=true class=link-icon></span></a> Example</h2><p>So, how about an example? I've created a very simple web application (in <a href=http://www.playframework.org/>Play 2.0</a>, obviously!) that may help to better understand the concepts behind these two trends. The source code can be found in <a href=https://github.com/pvillega/play2-responsive-sample>Github</a>. Download it and I'll be explaining the code next.<p><img alt="Desktop view of the example" src=/imgposts/responsive-desktop.png><p>The application has two content areas. A sidebar in the left that is only visible on a desktop environment and which loads a set of results from Google News, and a main area that contains a bit of text explaining the application plus a set of images obtained from <a href=https://en.gravatar.com/>Gravatar</a>. There is also a colour border around the body, coloured red for a browser with a “desktop” size. Simple, but it should be enough to showcase the ideas behind the concepts discussed above.<p>The application uses 3 different techniques to manage 3 elements of the application:<ul><li><p><strong>CSS Media Queries</strong> are used to select the colour of the border around the body of the page. As you resize the browser horizontally the colour should change when you cross one of the thresholds set. These thresholds are also used to show or hide the sidebar. These changes are dynamically applied when you resize the browser, but on the other hand they don't reduce the amount of content downloaded on page request.</p><li><p><strong>Conditional load</strong> for the contents of the sidebar. The list of news items in the sidebar are loaded via a query to Google News. As the sidebar may not be displayed in some browsers, we only execute the query when the viewport is bigger than a given value. This check only happens when we load the page, so if the content wasn't loaded and the browser is then resized so the sidebar becomes visible, the user won't see the news items but some default text that allows the user to access the same content by launching a Google query, so we don't “punish” the user for resizing the browser by removing access to content.</p><li><p><strong>Delayed load</strong> for the images in the main area. We could use <em>img</em> tags in the page when rendering it but that would mean that the browser will have to launch multiple requests (one per image) while loading the page. With this technique we mark some anchor tags with metadata and, once the page has been loaded, we inject the img tags into the page. The images will be loaded at that point, but the site itself will be already working and the user can interact with it even in slower connections. We can also modify the size of the image we display according to the viewport so the user downloads a smaller version in devices with potentially worse connections. As with conditional load, this only works on the request, resizing the browser won't launch the script again.</p></ul><p>Now that we know what is being done, let's go into the relevant parts of the code. The application uses 2 templates: main.scala.html provides some common behaviour (like css and javascript files) while index.scala.html contains the relevant code of the demo. The application is using <a href=http://twitter.github.com/bootstrap/>Twitter Bootstrap</a> for the base layout. Some code (like <a href=http://modernizr.com/>Modernizr</a> usage) is not explained in this post but the demo contains some comments about it.<p>To enable the responsive layout from Bootstrap I add in <strong>main.html</strong> the following:<pre><code>&LTmeta name="viewport" content="width=device-width, initial-scale=1.0">

</code></pre><p>This will ensure that the browser doesn't try to fake the viewport size on the request, while still allowing for zooming in mobile devices.<p>In <strong>index.scala.html</strong> I declare the basic layout with the two areas of the page. I use a fluid layout from Bootstrap plus one of the responsive styles (visible-desktop) which will hide the sidebar if the browser is less than <em>968px</em> wide.<pre><code>
&LTdiv class="container-fluid">
 &LTdiv class="row-fluid">
   &LTdiv class="span2 visible-desktop">
   &LT!-- Sidebar content -->
   &LT/div>

   &LTdiv class=”span10”>
   &LT!-- Main content -->
   &LT/div>
 &LT/div>
&LT/div>

</code></pre><p>The styles file, <strong>main.css</strong>, contains a set of media queries that will change the border around the body of the page according to the size of the browser:<pre><code>
/* Landscape phones and down */
@media (max-width: 480px) {
  body {
    border: 2px magenta solid;
  }
}


/* Landscape phone to portrait tablet */
@media (min-width: 480px) and (max-width: 768px) {
  body {
    border: 2px grey solid;
  }
}


/* Portrait tablet to landscape and desktop */
@media (min-width: 768px) and (max-width: 979px) {
  body {
    border: 2px blue solid;
  }
}


/* Desktop */
@media (min-width: 979px) and (max-width: 1200px) {
  body {
    border: 2px orange solid;
  }
}

/* Large desktop */
@media (min-width: 1200px) {
  body {
    border: 2px red solid;
  }
}

</code></pre><p>Up to here there are elements that will be downloaded always, whatever the viewport size, and may change behaviour dynamically as you resize your browser. Many responsive layouts stop here, but if the sidebar contained a lot of data and images, that would penalize mobile users by forcing them to download extra content they'll never see.<p>To solve this we add a minimal amount of content to the sidebar, so if a user resizes the browser and sees it doesn't get a white gap with no content (progressive enhancement):<pre><code>
&LT!--Sidebar content -->
&LTh2>Dynamic Sidebar&LT/h2>
&LTp>
  This sidebar loads a minimal amount of content by default.
  If we will display it, some ajax requests will populate it
  with extra content.
&LT/p>

&LThr/>

&LTdiv id="sidebar">

&LT!-- We provide a link to access the data we are not loading in case
     the user resizes the screen and sees this bar -->
&LTa href="http://www.google.com/search?q=responsive+design&ampamp;amp;tbm=nws">
Search Google on Responsive Design
&LT/a>

&LT/div>

</code></pre><p>and then we add some javascript magic to load the real content dynamically via Conditional Loading. In this example the content loaded is the result of a query to Google News. The details on the retrieval of the data are not relevant to this post. What's relevant is this part of the code (excerpt):<pre><code>

/* This loads the content of the side bar asynchronously,
   so we won't do that request if the sidebar won't be shown */
$(function() {
  if ($(window).width() >= 979) {
    searchGoogle('responsive+design');
  }
});


</code></pre><p>This fragment will wait until the page has been loaded (equivalent to jquery's <code>$(document).ready</code> ) and then check the window size. If the size corresponds to a desktop browser (in which the Bootstrap style visible-desktop will stop hiding the sidebar) then the search is triggered and the content added to the sidebar. Otherwise nothing happens.<p>This means that for a mobile user there will be no extra work done (besides a simple javascript check) as the information would not be shown, improving the loading time of the page. The fact that the check is done after the main content is ready is also relevant, as the user can start interacting with the main page immediately when in a desktop, and the additional data (which is less relevant to the user) will be loaded in the meantime.<p>Let's talk now about the images displayed in the main area and Delayed Loading. In this sample around <em>500 images</em> are loaded at once in that section. This could be, in reality, the comments area of a popular blog with lots of comments (and their corresponding images).<p>Following the naïve approach the html would be rendered with 500 <em>img</em> tags, which would cause the browser to load these images in parallel to the rest of the page, delaying the “ready” status of the page. In Delayed Loading javascript, triggered once the document has loaded, is used to modify the Html DOM. This way the images are loaded later, once the page is ready and functional for the user. This approach also gives extra control on the size of the images loaded.<p>The relevant code follows:<pre><code>

/* This loads the avatars asynchronously, so the response time of the page
 improves as images are loaded by the browser after all content is ready */
$(function() {

  /* Dynamically select an image size as per viewport size */
  function getAvatarSize() {
    var size = 100;

    // we check the viewport width against the sizes in css media queries
    var viewport = $(window).width();
    if(viewport <=  480) {
        size = 25;
    } else if(viewport <= 768) {
        size = 75;
    } else if(viewport <= 979) {
        size = 125;
    } else {
        size = 175;
    }
    return size;
  }

  var avatarSize = getAvatarSize();

  /* Load all avatars now */
  $('a[data-gravatar-hash]').prepend(function(index){
    var hash = $(this).attr('data-gravatar-hash')
    return '&LTimg alt="Avatar Image"'
      + src="http://www.gravatar.com/avatar.php?size='
      + avatarSize + '&ampamp;gravatar_id=' + hash + '">&LTbr/>';
  });
});

</code></pre><p>With this code a proper image size (as per the browser size) is selected when the page is ready, and then the img tags are injected into the corresponding placeholders. The result is a delayed loading of secondary content that speeds up the page for the user, providing a better experience specially in slow networks.<p>To see the impact of these modifications on the page load, see the following network analysis done by Chrome:<p><img alt="Network analysis by Chrome" src=/imgposts/responsive-network.png><p>As you can see, the page has 2 main blocks of request. The first one corresponds to the basic content of the page (html, css, javascript) and takes <em>less than 300ms</em>. At this point the page is ready and the user can interact with it. The second block starts then and corresponds to the delayed requests, taking <em>additional 315ms</em>.<p>In this simple example we get to the “ready” status <strong>50% faster</strong>. As you can see, this can be a huge benefit for more complex pages, providing the best UX possible to their customers. Worth the extra effort :)<p>Feel free to add any comments on the subject below!</section><nav class="full-width article-navigation"><div><a aria-describedby=left_title aria-label=Next href=https://perevillega.com/posts/learning-scala-in-coursera/><span class=arrow>←</span> Next</a><p aria-hidden=true id=left_title>Learning Scala in Coursera</div><div><a aria-describedby=right_title aria-label=Prev href=https://perevillega.com/posts/its-back/>Prev <span class=arrow>→</span></a><p aria-hidden=true id=right_title>It's Back</div></nav></article></main><script defer src=https://perevillega.com/js/mermaid.min.js></script><span class=hidden id=copy-success> Copied! </span><span class=hidden id=copy-init> Copy code to clipboard </span><script defer src=https://perevillega.com/js/copyCodeToClipboard.min.js></script></div><footer><section><nav class="socials nav-navs"><ul><li><a class="nav-links no-hover-padding social" href=https://perevillega.com/atom.xml> <img alt=feed loading=lazy src=https://perevillega.com/social_icons/rss.svg title=feed> </a><li class=js><a class="nav-links no-hover-padding social" data-encoded-email=cHZpbGxlZ2ErYmxvZ0BhcmFjb24uY29t href=#><img alt=email loading=lazy src=https://perevillega.com/social_icons/email.svg title=email> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://github.com/pvillega> <img alt=github loading=lazy src=https://perevillega.com/social_icons/github.svg title=github> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://gitlab.com/pvillega> <img alt=gitlab loading=lazy src=https://perevillega.com/social_icons/gitlab.svg title=gitlab> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://bsky.app/profile/perevillega.com> <img alt=bluesky loading=lazy src=https://perevillega.com/social_icons/bluesky.svg title=bluesky> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://www.linkedin.com/in/perevillega/> <img alt=linkedin loading=lazy src=https://perevillega.com/social_icons/linkedin.svg title=linkedin> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://stackoverflow.com/users/116791/pere-villega> <img alt="stack overflow" title="stack overflow" loading=lazy src=https://perevillega.com/social_icons/stack-overflow.svg> </a></ul></nav><nav class=nav-navs><small> <ul><li><a class="nav-links no-hover-padding" href=https://perevillega.com/sitemap.xml> sitemap </a></ul> </small></nav><div class=credits><small> Powered by <a href=https://www.getzola.org>Zola</a> & <a href=https://github.com/welpo/tabi>tabi</a> </small></div></section><script async src=https://perevillega.com/js/decodeMail.min.js></script><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><h1 class=visually-hidden id=modalTitle>Search</h1><div id=modal-content><div id=searchBar><div aria-hidden=true class=search-icon><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg></div><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search… role=combobox spellcheck=false><div class="close-icon interactive-icon" title="Clear search" id=clear-search role=button tabindex=0><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></div></div><div id=results-container><div id=results-info><span id=zero_results> No results</span><span id=one_results> $NUMBER result</span><span id=many_results> $NUMBER results</span><span id=two_results> $NUMBER results</span><span id=few_results> $NUMBER results</span></div><div id=results role=listbox></div></div></div></div></footer>